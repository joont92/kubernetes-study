# 파드
- 쿠버네티스의 기본 빌드 단위이며, 쿠버네티스에서 가장 중요한 개념이다
- 파드는 컨테이너 하나가 아니라 여러 컨테이너의 그룹이다
    - 하지만 일반적으로 파드는 하나의 컨테이너만 포함한다
    - 파드에 속한 컨테이너들은 항상 하나의 워커노드에서 실행된다(여러 노드에 분산되서 실행되지 않는다)
- 컨테이너를 직접 사용하지 않고 파드를 사용하는 이유는 아래와 같다
    - 여러 프로세스를 같이 실행해야하는 상황을 충족시키지 못하기 떄문이다
        > 컨테이너 자체가 **단일 프로세스를 실행하는 것을 목적으로 설계된 기술**이기 때문이다
        > 컨테이너에 여러 프로세스가 들어간다면, 개별 프로세스에 대한 제어 메커니즘이 필요해지고, 여러 프로세스에서 동일한 표준출력으로 찍는 로그를 파악하기 어려워진다
    - 파드를 사용하면 단일 컨테이너 안에서 프로세스가 같이 실행되는 것 처럼 환경을 구성할 수 있다

- 특별한 이유가 없다면 하나의 파드에 하나의 컨테이너(어플리케이션)만 넣어 구성하는 것이 좋다
    - 아래의 사항들을 체크해보면 좋다
        - 컨테이너를 함꼐 실행해야 하는가(IPC?)? 혹은 다른 호스트에서 실행해도 되는가?
        - 여러 컨테이너가 모여서 하나의 구성요소가 되는가? 혹은 개별적인 구성 요소인가?
        - 컨테이너가 함께, 혹은 개별적으로 스케일링 되어야 하는가?
    - 컨테이너를 개별적으로 스케일링 해야한다면, 하나의 파드에 배포해야한다 
        - 쿠버네티스 수평확장의 최소단위가 파드이기 때문에(컨테이너 개별 확장 불가능)
    - 여러 컨테이너를 하나의 파드에 넣는 주된 이유는, 어플리케이션이 하나의 주요 프로세스와 하나 이상의 보완 프로세스로 구성된 경우이다
        > e.g. 주 컨테이너는 특정 디렉터리에서 파일을 제공하는 웹 서버이고, 추가 컨테이너는 외부 소스에서 주기적으로 콘텐츠를 받아 디렉터리에 저장함
        > e.g. 로그 로테이터와 수집기, 데이터 프로세서 등
    - 파드에 컨테이너를 

- 같은 파드내 컨테이너들은 부분적으로 격리된다
    - 여러 프로세스가 실행되는 것과 동일한 환경을 만들어줘야 하기 때문이다
    - 파드내 모든 컨테이너가 동일한 네임스페이스(네트워크, UTS, IPC)를 사용하도록 한다
    - 그러나 파일시스템은 컨테이너의 특성 때문에 여전히 분리되므로, 볼륨이라는 개념을 사용해야 한다
- 파드내 컨테이너간 같은 네트워크 네임스페이스를 사용하므로, 동일한 IP 주소와 공간을 공유한다
    - 파드내 컨테이너들의 ip 는 같다?
    - localhost 로 통신이 가능하다
    - 포트가 겹치지 않도록 주의해야한다
- 쿠버네티스의 모든 파드는 하나의 플랫한 네트워크 공간에 상주하므로, 모든 파드는 다른 파드의 IP 주소를 사용해 접근하는 것이 가능하다

- 특별한 일이 없다면 하나의 파드에 하나으 밀접하게 관련있는 프로세스만 하나의 파드에 넣는것이 좋고(멀티 컨테이너), 특